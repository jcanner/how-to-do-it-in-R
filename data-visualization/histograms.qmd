---
title: "Histograms"
format: live-html
engine: knitr
webr:
  packages: ['ggformula', 'palmerpenguins']
execute: 
  warning: false
  message: false
code-copy: true
code-overflow: wrap
toc: true
---

{{< include ../_extensions/r-wasm/live/_knitr.qmd >}}

## Getting Started

First, be sure you have installed `ggformula`. Remember, you only need to install the package once on your machine.

Then, be sure to load the package `ggformula`. Remember, you need to do this with each new Quarto/RMarkdown document or R Session.

```{webr}
#| label: setup
library(ggformula) #for graphs
```


### Data for Examples

As a reminder (see [Overview of Data Visualization](visualization-overview.qmd), we will be using the `penguins` data from the `palmerpenguins` package: 

```{r}
#| label: load-penguins
library(palmerpenguins)
```

Here is a snippet of the data:

```{r}
#| label: data-structure 
#| echo: false
library(dplyr)
library(gt)
slice_sample(penguins, n = 5) |> 
  gt::gt() |> 
  gt::tab_header(title = "Palmer Penguins")
```

## Histograms with One Quantitative Variable

### Basic Code

For a single quantitative variable, `x`, here is the general structure. 

```{r}
#| label: one-var-structure
#| eval: false
gf_histogram(~x, 
             data = mydata)
```

Run the code below to see an example using the **quantitative** variable `bill_length_mm` from the `penguins` data.  Then replace `bill_length_mm` with another quantitative variable from the `penuins` data (e.g. `bill_depth_mm`)

```{webr}
#| label: histogram-one
gf_histogram(~bill_length_mm, 
             data = penguins)
```

Notice the warning produced from running the code. This is just a warning that there were rows (penguins) ignored due to missing data.  


### Bin Widths

One of the features of a histogram is the **bin width**. The bin width is something that is automatically generated for most histogram functions, but it is not always ideal. You can add an *argument* to the R function `gf_histogram()` to modify the bin width.

```{r}
#| label: one-var-structure-bin
#| eval: false
gf_histogram(~ x, 
             data = mydata, 
             binwidth = 10)  #adjust this number
```

Run the code below to see an example using the **quantitative** variable `bill_length_mm` from the `penguins` data with a bin width of 5 (mm). Modify the bin width and see how it affects the histogram.  

```{webr}
#| label: histogram-one-bins
gf_histogram(~bill_length_mm, 
             data = penguins, 
             binwidth = 5)
```

### Adding Labels

Descriptive labels are important for any visualization. We can always add them to any visualization by adding `xlab = ` and `ylab = ` to your function.  

```{r}
#| label: one-var-structure
#| eval: false
gf_histogram(~x, 
             data = mydata,
             xlab = "X Axis Label",
             ylab = "Y Axis Label",
             title = "Descriptive Title")
```

Add labels and a title to the histogram for `bill_length_mm`.  

```{webr}
#| label: histogram-one-bins-add-labels
gf_histogram(~bill_length_mm, 
             data = penguins, 
             binwidth = 5)
```


### Other Modifications

We can add a few other modifications that purely aesthetic - just to make our graphs look nicer or easier to read. 


#### Outlining the Bars

We can add a color that outlines the bars by telling R to outline the color of the bars in black.  

```{r}
#| label: one-var-structure-bars-color
#| eval: false
gf_histogram(~x, 
             data = mydata,
             xlab = "X Axis Label",
             ylab = "Y Axis Label",
             title = "Descriptive Title",
             color = "black")
```

#### Filling the Bars with Color

We can add a color to fill the bars by telling R to fill the bars with a specified color either using a [built in color from R](https://r-charts.com/colors/) or using a [hex code for colors](https://htmlcolorcodes.com/color-picker/) .  

```{r}
#| label: one-var-structure-bars-color
#| eval: false
gf_histogram(~x, 
             data = mydata,
             xlab = "X Axis Label",
             ylab = "Y Axis Label",
             title = "Descriptive Title",
             fill = "darkcyan")
```


#### Changing the Theme

The package `ggformula` is built on top of another package called `ggplot2` and so any `ggplot2` function can be added to a `ggformula` generated graphic. For example, we can change the theme to a [built-in theme](https://ggplot2.tidyverse.org/reference/ggtheme.html). 

Try changing the theme to the following graph:  

```{webr}
#| label: histogram-one-theme
gf_histogram(~bill_length_mm, 
             data = penguins) +
  theme_light()
```

#### Changing Color Options


Try adding some modifications for the histogram of `bill_length_mm`.  

```{webr}
#| label: histogram-one-modify
gf_histogram(~bill_length_mm, 
             data = penguins)
```


## Histograms for Comparisons Across Groups


